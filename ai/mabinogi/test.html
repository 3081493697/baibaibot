<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <script language="JavaScript" type="text/JavaScript">
    <!--


    var adjust_value = -53; //驍坻錛宮镩丟壯??貳
    var adjust_value2 = Math.floor(adjust_value * 1.5); //壯??燎峁坻(?氐?場)

    function disp(){

      //============================================================
      // 壯???濾
      //============================================================
      var counter = document.getElementById('ErinnTime');
      var date = new Date();

      date.setUTCHours(date.getUTCHours() + 8);

      var second_source = Math.floor((date.getTime() % 2160000) / 1500) + adjust_value;
      var ETHours   = Math.floor(second_source / 60);
      var ETMinutes = Math.floor(second_source % 60);

      counter.firstChild.nodeValue = '' + dsp(ETHours) + ':' + dsp(ETMinutes);

      //============================================================
      // 壯??簞棓刱軀杦吝?彁悴大貝?兗轷峁蒽帚镂莇?嶸卒Yule噗吝鴣慎8鶴岙峁媼姍植媼劍
      //============================================================
      now = new Date();
      document.getElementById('RealTime').firstChild.nodeValue = '' + dsp(now.getHours()) + ':' + dsp(now.getMinutes());

      var hour = now.getHours();
      var min = now.getMinutes();
      var week = now.getDay() + 1;
      var aa;
      var priceNo;
      var buff;
      var i;
      var ptext;



     var rua = '0010001000010010110111000000010100100010001';
     var mg_count = 43; //鄶蟯
     var mg_rag  = 10;   //奣彝
     var mg_time = 17 * 1.5; //縫窗?濾
     var e_hour = Math.floor(second_source / 60) % 24; //壯???濾
     var e_min   = Math.floor(second_source % 60);

     var eweca = (e_hour >= 17 || e_hour < 6); //謀蹺?濾


      for(i=0; i<31; i++){

        aaa = chDay(date, i - (e_hour < 6));
        min = Math.floor(aaa + mg_time) % 60;
        hour = Math.floor((aaa + mg_time) / 60) % 24;
        mgNo = (Math.floor(aaa / 36) + mg_rag) % mg_count;

        //鳧彅?濾櫻鈺
        w_sec = Math.floor((aaa + mg_time + (eweca ? 13 * 1.5:0)) * 60);	//鍐狀?濾
        n_sec = Math.floor((date.getTime()) / 1000) + adjust_value2;		//驅?濾

        buff = dsp(hour) + ':' + dsp(min) + '  ' + (rua.substr(mgNo,1)==1?'上班':'休息') + '  ' + (i==0 ? (eweca ? '酒館營業中，距離關店還有' : '酒館準備中，距離開店還有')
          + (parseInt((w_sec - n_sec) / 60)%60) + '分' + dsp((w_sec - n_sec)%60) + '秒':'');

        mtext = document.getElementById('rua' + i);
        if (mtext){
          mtext.firstChild.nodeValue = buff;

        }
      }

      setTimeout('disp()', 500);
    }

    // 壯??龜樽峁刃悴彑??吝?廄彑濺?
    function chDay(date, next)
    {
      return (Math.floor(((date.getTime() + adjust_value2 * 1000) / (1000 * 60)) / 36) + next) * 36;
    }

    function dsp(value)
    {
      return (value < 10 ? '0' + value : value);
    }

    //-->
  </script>
  <script>
    //时间校正
    Now = new Date();
    ServerTime = 18 * 360 + 37 * 60 + 23;
    ClientTime = (Now.getHours()+Math.floor(Now.getTimezoneOffset()/60)+8)*360 + (Now.getMinutes()+Math.floor(Now.getTimezoneOffset()%60))*60 + Now.getSeconds();
    DifferenceTime = (ServerTime-ClientTime)*1000;
    if (DifferenceTime >= 82800) {DifferenceTime -= 86400;}
    if (DifferenceTime <=-82800) {DifferenceTime += 86400;}
    MabiServerTime = -64 * 1500;
    DifferenceTime += MabiServerTime;
    DifferenceTime = 0;




    //露雅上班时间
    var Rua = "0010010110111000000010100100010001001000100";



    function NowWatch() {
      //取得使用者系统时间
      var Now = new Date();
      //取得台北时间(+8)
      var TaipeiTime = Now.getTime();
      //爱尔琳时间校正(Day+14 Hour-16)
      var ErinnTime = TaipeiTime + (8*60*60*1000) + DifferenceTime;
      //取得爱尔琳时间
      var ErinnSeason = Math.floor((ErinnTime % (7*40*24*60*1.5*1000) / (40*24*60*1.5*1000)) + 4) % 7;
      var ErinnDay = Math.floor(ErinnTime % (40*24*60*1.5*1000) / (24*60*1.5*1000)) + 1;
      var ErinnHour = Math.floor((ErinnTime % (24*60*1.5*1000)) / (60*1.5*1000));
      var ErinnMinute = Math.floor((ErinnTime % (60*1.5*1000)) / (1.5*1000));
      if ( ErinnSeason == 0 )   {ErinnSeason = "";}
      if ( ErinnSeason == 1 )   {ErinnSeason = "";}
      if ( ErinnSeason == 2 )   {ErinnSeason = "<br><br>&nbsp;明天维护，请提前捡起仍地上的装备以免消失= v =";}
      if ( ErinnSeason == 3 )   {ErinnSeason = "";}
      if ( ErinnSeason == 4 )   {ErinnSeason = "";}
      if ( ErinnSeason == 5 )   {ErinnSeason = "";}
      if ( ErinnSeason == 6 )   {ErinnSeason = "";}
      if ( ErinnHour < 10 )   {ErinnHour = "0" + ErinnHour;}
      if ( ErinnMinute < 10 ) {ErinnMinute = "0" + ErinnMinute;}
      //取得艾维卡时间
      var MoonTime = ErinnTime + (90000 * 6);
      var MoonDay = Math.floor(MoonTime % (Moongate.length*24*60*1.5*1000) / (24*60*1.5*1000));
      var MoonHour = Math.floor((MoonTime % (24*60*1.5*1000)) / (60*1.5*1000));
      var MoonMinute = Math.floor((MoonTime % (60*1.5*1000)) / (1.5*1000));
      //取得露雅时间
      var RuaDay = Math.floor(MoonTime % (43*24*60*1.5*1000) / (24*60*1.5*1000));
      //取得流浪商人时间
      var BunsDay = Math.floor(ErinnTime % (14*24*60*1.5*1000) / (24*60*1.5*1000));

      //基本显示格式
      NormalPrint = "现在洛奇时间 <font color=ff0000>" + ErinnHour + ":" + ErinnMinute + "</font>&nbsp;&nbsp;"

      //输出资料
      {
        if ( MoonHour * 60 + MoonMinute <= 720 )   {}


        else   {}
        {
          NormalPrint = (NormalPrint + "<br><br>&nbsp;流浪商人在 " + Business[BunsDay]);}
      }

      {
        if ( MoonHour * 60 + MoonMinute <= 720 )   {
          NormalPrint = (NormalPrint + "&nbsp;&nbsp;&nbsp;茹娅正在" + (Test(Rua.substr(RuaDay%43,1))?"上班".fontcolor("#66CCFF"):"休息".fontcolor("CCCCCC")) + "　明天" + (Test(Rua.substr((RuaDay%43)+1,1))?"上班".fontcolor("#66CCFF"):"休息".fontcolor("CCCCCC"))+ErinnSeason);}
        else   {
          NormalPrint = (NormalPrint + "&nbsp;&nbsp;&nbsp;茹娅即将" + (Test(Rua.substr((RuaDay%43)+1,1))?"上班".fontcolor("#66CCFF"):"休息".fontcolor("CCCCCC")) + "　明天" + (Test(Rua.substr((RuaDay%43)+2,1))?"上班".fontcolor("#66CCFF"):"休息".fontcolor("CCCCCC"))+ErinnSeason );}
      }


      document.getElementById('mgbclock').innerHTML = NormalPrint;



      setTimeout("NowWatch()",250);
    }



    function Test(Num){
      if (Num==1)   {
        return true;}
      else  {
        return false;}
    }

  </script>
</head>
<body>

</body>
</html>